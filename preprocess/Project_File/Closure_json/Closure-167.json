{"id":783,"status":"Fixed","summary":"invalid property not erroring in for loop in prototype function","labels":["Type-Defect","Priority-Medium"],"stars":0,"commentCount":3,"comments":[{"id":0,"commenterId":-2236042086396273250,"content":"I think this example can be simplified to use a typedef instead of externs, but using an extern for the repro case.\r\n\r\nCompile the attached with:\r\njava -jar build/compiler.jar --formatting\u003dPRETTY_PRINT --jscomp_error\u003dcheckTypes --jscomp_error\u003dexternsValidation --compilation_level\u003dSIMPLE_OPTIMIZATIONS --externs\u003dinloop-externs.js inloop.js (pasted below for completeness)\r\n\r\nI would expect an error on the line in the for loop in the doIt function, but this compiles just fine. The commented out line above it properly errors, and if the same code is outside a prototype function, it errors. It does not error within the prototype function.\r\n\r\nThanks\r\n\r\n\r\n/**\r\n * @param {ns.Thing} thing\r\n * @constructor\r\n */\r\nns.MyClass \u003d function(thing) {\r\n  /** @type {ns.Thing} */ this.thing_ \u003d thing;\r\n};\r\n\r\nns.MyClass.prototype.doIt \u003d function() {\r\n  var subthing \u003d this.thing_.subthing;\r\n  // ERRORS:\r\n  // window.console.log(subthing.noprop);\r\n\r\n  // NO ERROR:\r\n  for (var i \u003d 0; i \u0026lt; subthing.noprop; i++) {\r\n    window.console.log(i);\r\n  }\r\n};\r\n\r\nvar thing \u003d /** @type {ns.Thing} */({subthing: {prop: 3}});\r\n\r\n/*\r\n  ERRORS:\r\n  var subthing \u003d thing.subthing;\r\n  for (var i \u003d 0; i \u0026lt; subthing.noprop; i++) {\r\n    window.console.log(i);\r\n  } */\r\n\r\nvar c \u003d new ns.MyClass(thing);\r\nco.doIt();\r\n\r\n\r\n","timestamp":1343691784,"attachments":[{"id":7830000000,"fileName":"inloop-externs.js","fileSize":196},{"id":7830000001,"fileName":"inloop.js","fileSize":595}]},{"id":1,"commenterId":-7699928860083865744,"content":"","timestamp":1343926504,"attachments":[]},{"id":2,"commenterId":-7699928860083865744,"content":"This issue was closed by revision r2121.","timestamp":1344005468,"attachments":[]}]}