{"id":747,"status":"Fixed","summary":"tryFoldArrayAccess does not check for side effects","labels":["Type-Defect","Priority-Medium"],"stars":0,"commentCount":3,"comments":[{"id":0,"commenterId":2141497437336661090,"content":"\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n1. Compile the following program with simple or advanced optimization:\r\nconsole.log([console.log(\u0027hello, \u0027), \u0027world!\u0027][1]);\r\n\r\n\u003cb\u003eWhat is the expected output? What do you see instead?\u003c/b\u003e\nThe expected output would preserve side effects. It would not transform the program at all or transform it into:\r\n\r\nconsole.log((console.log(\u0026quot;hello\u0026quot;), \u0026quot;world!\u0026quot;));\r\n\r\nInstead, the program is transformed into:\r\n\r\nconsole.log(\u0026quot;world!\u0026quot;);\r\n\r\n\u003cb\u003eWhat version of the product are you using? On what operating system?\u003c/b\u003e\nRevision 2022. Ubuntu 12.04.\r\n\r\n\u003cb\u003ePlease provide any additional information below.\u003c/b\u003e\ntryFoldArrayAccess in com.google.javascript.jscomp.PeepholeFoldConstants should check whether   every array element that is not going to be preserved has no side effects.","timestamp":1339008044,"attachments":[{"id":7470000000,"fileName":"foldarray.diff","fileSize":1278}]},{"id":1,"commenterId":-7699928860083865744,"content":"thanks!","timestamp":1339076631,"attachments":[]},{"id":2,"commenterId":1328304962299559429,"content":"This issue was closed by revision r2030.","timestamp":1339172811,"attachments":[]}]}