{"id":440,"status":"Fixed","summary":"Compiler should warn/error when instance methods are operated on","labels":["Type-Defect","Priority-Medium"],"stars":1,"commentCount":2,"comments":[{"id":0,"commenterId":5969771180739880152,"content":"\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n1. Compile and run the following code:\r\n  goog.require(\u0027goog.graphics.Path\u0027);\r\n  function demo() {\r\n    var path \u003d new goog.graphics.Path();\r\n    var points \u003d [[1,1], [2,2]];\r\n    for (var i \u003d 0; i \u0026lt; points.length; i++) {\r\n      (i \u003d\u003d 0 ? path.moveTo : path.lineTo)(points[i][0], points[i][1]);\r\n    }\r\n  }\r\n  goog.exportSymbol(\u0027demo\u0027, demo);\r\n\r\n\u003cb\u003eWhat is the expected output? What do you see instead?\u003c/b\u003e\nI expect it to either work or produce a warning.  In this case, the latter since there\u0027s an error in the javascript - when calling path.moveTo(x, y), \u0026quot;this\u0026quot; is set correctly to the path element in the moveTo function.  But when the function is operated on, as in (i \u003d\u003d 0 ? path.moveTo : path.lineTo)(x, y), it\u0027s no longer an instance method invocation, so \u0026quot;this\u0026quot; reverts to the window object.  In this case, an error results because moveTo references a field in Path that is now \u0026quot;undefined\u0026quot;.  Better would be to issue a warning/error that an instance method is being converted to a normal function (perhaps only if it references this).\r\n\r\n\u003cb\u003eWhat version of the product are you using? On what operating system?\u003c/b\u003e\nUnknown (it\u0027s built into my build tools) - I presume this issue is present in all builds.  Running on ubuntu.\r\n\r\n\u003cb\u003ePlease provide any additional information below.\u003c/b\u003e","timestamp":1304467530,"attachments":[]},{"id":1,"commenterId":1328304962299559429,"content":"This issue was closed by revision r1147.","timestamp":1306943625,"attachments":[]}]}