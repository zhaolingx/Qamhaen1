{"id":384,"status":"Fixed","summary":"Assignments within conditions are sometimes incorrectly removed","labels":["Type-Defect","Priority-Medium"],"stars":15,"commentCount":6,"comments":[{"id":0,"commenterId":-1281124933940039981,"content":"\u003cb\u003eWhat steps will reproduce the problem?\u003c/b\u003e\n\r\n1. See attachment.\r\n2. Run original.\r\n3. Run compiled.\r\n\r\n\r\n\u003cb\u003eWhat is the expected output? What do you see instead?\u003c/b\u003e\n\r\n* Both should return \u0026quot;true\u0026quot;\r\n* Original does return \u0026quot;true\u0026quot;\r\n* Compiled returns \u0026quot;undefined\u0026quot;\r\n\r\n\r\n\u003cb\u003eWhat version of the product are you using? On what operating system?\u003c/b\u003e\n\r\nClosure Compiler (http://code.google.com/closure/compiler)\r\nVersion: 706\r\nBuilt on: 2011/01/19 19:53\r\n\r\nMac OS X 10.6\r\n\r\n\u003cb\u003ePlease provide any additional information below.\u003c/b\u003e\n\r\nIn the attached reduction if the \u0026quot;echo\u0026quot; functions aren\u0027t used then the entire body of the function is compiled away, they are there to demonstrate that the first assignment in the condition is removed.\r\n\r\n\r\nOriginal:\r\n\r\nfunction reduction()\r\n{\r\n    var a, b;\r\n    if (echo(b \u003d true) || echo(b \u003d false))\r\n        a \u003d b;\r\n    else\r\n        a \u003d null;\r\n    return a;\r\n}\r\n\r\n\r\nCompiled:\r\n\r\nfunction reduction() {\r\n    var a;\r\n    return echo(true) || echo(a \u003d false) ? a: null\r\n}","timestamp":1300315517,"attachments":[]},{"id":1,"commenterId":-1281124933940039981,"content":"Oops, forgot the attachment.","timestamp":1300317104,"attachments":[{"id":4078836720749486370,"fileName":"reduction.js","fileSize":195}]},{"id":2,"commenterId":-7699928860083865744,"content":"i think this might be fixed at head, but not sure. Alan, is this a known issue?","timestamp":1300324619,"attachments":[]},{"id":3,"commenterId":-215138502632663007,"content":"Not that I know of.\r\n\r\nSeems like it could be a dead assignment elimination issue.\r\n\r\nI\u0027ll take a look.","timestamp":1300327704,"attachments":[]},{"id":4,"commenterId":-5060162230523776870,"content":"","timestamp":1300463933,"attachments":[]},{"id":5,"commenterId":-7699928860083865744,"content":"This issue was closed by revision r913.","timestamp":1300566932,"attachments":[]}]}